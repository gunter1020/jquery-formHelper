!function e(i,t,n){function a(f,r){if(!t[f]){if(!i[f]){var o="function"==typeof require&&require;if(!r&&o)return o(f,!0);if(l)return l(f,!0);var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var s=t[f]={exports:{}};i[f][0].call(s.exports,(function(e){return a(i[f][1][e]||e)}),s,s.exports,e,i,t,n)}return t[f].exports}for(var l="function"==typeof require&&require,f=0;f<n.length;f++)a(n[f]);return a}({1:[function(e,i,t){"use strict";var n=e("./lib/filePicker.js");!function(e){if(!$)throw"formHelper requires jQuery to be loaded first";var i;i=function(e,i){var t={},a={filePicker:new n.filePicker(e,i)},l=function(i){return $(i||e||document.body)};return t.addFilePicker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.filePicker.addPicker(e)},t.getFilePickerInfo=function(e){return a.filePicker.getAllInfo(l(e))},t.check=function(e){var t=l(e);try{a.filePicker.check(t)}catch(e){return"function"==typeof i.onFail&&i.onFail(e),!1}return!0},t.submit=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=$.Deferred(),a=l(t);if(this.check(a)){var f=a.is("form")?new FormData(a.get(0)):new FormData;$.isEmptyObject(i)||$.each(i,(function(e,i){Array.isArray(i)?i.map((function(i){f.append("".concat(e,"[]"),String(i))})):f.append(e,String(i))})),$.ajax({url:e,data:f,dataType:"json",processData:!1,contentType:!1,cache:!1,method:"POST"}).done(n.resolve).fail(n.reject)}return n.promise()},t},window.FormHelper=function(e){return i($(document.body),$.extend(!0,{},$.fn.formhelper.defaults,e))},$.fn.formhelper=function(e){return this.each((function(){var t=$(this);t.data("FormHelper")||(e=$.extend(!0,{},$.fn.formhelper.defaults,e),t.data("FormHelper",i(t,e)))})),this.data("FormHelper")},$.fn.formhelper.defaults={maxBytes:20971520,maxFiles:20,filePicker:{canRemove:!0,canModify:!0,container:!1,maxBytes:10485760,maxFiles:10,onChange:!1,onCreate:!1,onRemove:!1,fileInput:{name:"files[]",accept:[],multiple:!1}},language:{selectFile:"Select file",selectingFile:"Selecting files...",unselectFile:"No files selected.",limitMsg:"File size limit ({0}). Upload limit {1} files.",acceptMsg:"File accept format list: {0}",fileSizeOverload:"File size overload! limit size: {1}",fileCountOverload:"File count overload! limit count: {1}"},templates:{filePicker:!1,fileBox:!1},onFail:function(e){alert("[".concat(e.code,"] ").concat(e.msg))}}}()},{"./lib/filePicker.js":2}],2:[function(e,i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filePicker=void 0;t.filePicker=function(e,i){var t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=i.language,a=function(e){var i=e<1?0:Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,i)).toFixed(2).toString()," ").concat(t[i])},l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"==typeof i.templates.filePicker)e=$(i.templates.filePicker(t));else if(i.templates.filePicker)e=$(i.templates.filePicker);else{var l=[];$.each(t.fileInput.accept,(function(e,i){l.push($("<span>").addClass("fh-accept-tag").text(i).prop("outerHTML"))}));var f=l.length?$("<span>").text(n.acceptMsg).prop("innerHTML").replace("{0}",l.join("")):"",r=n.limitMsg.replace("{0}",a(t.maxBytes)).replace("{1}",t.maxFiles);e=$("<div>").addClass("fh-file-picker").append($("<button>").attr({type:"button"}).addClass("btn btn-success fh-file-select").append($("<span>").text(n.selectFile).prepend($("<i>").addClass("fas fa-plus fa-fw")))).append($("<div>").addClass("fh-file-block").append($("<span>").addClass("fh-file-accept").html(f)).append($("<span>").addClass("fh-file-limit").text(r)).append($("<span>").addClass("fh-file-unselect").text(n.unselectFile)).append($("<div>").addClass("fh-file-list"))).append($("<div>").addClass("fh-file-msg"))}return u(e,t),e},f=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"==typeof i.templates.fileBox)e=$(i.templates.fileBox(t));else if(i.templates.fileBox)e=$(i.templates.fileBox);else{var l=[];e=$("<div>").addClass("fh-file-box"),t.$fileInput&&e.append(t.$fileInput.attr({type:"file",name:t.fileInput.name,accept:t.fileInput.accept.join(","),multiple:t.fileInput.multiple}).addClass("fh-file-input").hide()),t.inputs&&$.each(t.inputs,(function(i,t){e.append($("<input>").attr({type:"hidden",name:t.name,value:t.value}))})),t.files&&t.files.length?$.each(t.files,(function(i,t){var n=$("<span>").addClass("fh-file-info").data(t),l="".concat(t.name," (").concat(a(t.size),")");"link"in t?n.append($("<a>").attr({href:t.link,target:"_blank"}).text(l)):n.text(l),e.append(n.prepend($("<i>").addClass("far fa-file fa-fw")))})):e.append($("<span>").addClass("fh-file-info").text(n.selectingFile)),t.canModify&&t.$fileInput&&l.push($("<span>").addClass("fh-file-modify").append($("<i>").addClass("fas fa-pen fa-fw"))),t.canRemove&&l.push($("<span>").addClass("fh-file-remove").append($("<i>").addClass("fas fa-times fa-fw"))),l.length&&e.append($("<div>").addClass("fh-file-toolbar").append(l))}return h(e,t),e},r=function(e){var i=[];return $.each(e.find(".fh-file-info"),(function(){i.push($(this).data())})),i},o=function(e){var i=0;return $.each(r(e),(function(e,t){i+=t.size})),i},c=function(e){return r(e).length},s=function(e){var i=e.$filePicker.find(".fh-file-msg"),t=e.$filePicker.find(".fh-file-select"),n=e.$filePicker.find(".fh-file-unselect"),l=o(e.$filePicker),f=c(e.$filePicker),r=l>e.maxBytes,s=f>e.maxFiles,p=l>=e.maxBytes||f>=e.maxFiles;n.length&&(f?n.hide():n.show()),t.attr("disabled",p),i.empty(),r&&i.append($("<div>").addClass("fh-file-invalid").text(m("fileSizeOverload",a(e.maxBytes)))),s&&i.append($("<div>").addClass("fh-file-invalid").text(m("fileCountOverload",e.maxFiles))),"function"==typeof e.onChange&&e.onChange(e)},p=function(e){"function"==typeof e.onCreate&&e.onCreate(e)},d=function(e){"function"==typeof e.onRemove&&e.onRemove(e)},u=function(e,i){var t=e.find(".fh-file-list"),n=e.find(".fh-file-select"),a=$("<input>").attr({type:"file",accept:i.fileInput.accept.join(","),multiple:i.fileInput.multiple});n.on("click",(function(){a.trigger("click")})),a.on("change.formhelper",(function(){if(this.files.length>0){var e=$.extend(!0,{},i,{files:this.files,$fileInput:a.clone()});t.append(f(e)),p(e),s(e)}a.prop("type","").prop("type","file")}))},h=function(e,i){var t=e.find(".fh-file-input"),n=e.find(".fh-file-modify"),a=e.find(".fh-file-remove");t.on("change",(function(){if(this.files.length>0){var n=$.extend(!0,{},i,{files:this.files,$fileInput:t.clone()});e.after(f(n)).remove(),s(n)}else e.remove(),d(i),s(i)})),n.on("click",(function(){t.trigger("click")})),a.on("click",(function(){e.remove(),d(i),s(i)}))},m=function(e,i){return(n[e]||"").replace("{0}",e).replace("{1}",i)},v=function(i,t,n){this.code=i,this.msg=m(i,t),this.$el=n||e,this.api=this.$el.data("FilePicker")||{}};return this.addPicker=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=$.extend(!0,{},i.filePicker,t)).fileInput.accept=Array.isArray(t.fileInput.accept)?t.fileInput.accept:t.fileInput.accept.split(","),t.$filePicker=l(t);var n=t.$filePicker.find(".fh-file-list");return t.api={getEl:function(){return t.$filePicker},getSize:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=o(t.$filePicker);return e?a(i):i},getCount:function(){return c(t.$filePicker)},getConfig:function(){return t},addFileBox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=$.extend(!0,{},t,e);var i=f(e);return n.append(i),p(e),s(e),i}},t.$filePicker.data("FilePicker",t.api),$(t.container||e).append(t.$filePicker),t.api},this.getAllInfo=function(e){var i={size:0,sizeHum:"",count:0,picker:[]};return $.each(e.find(".fh-file-picker"),(function(){var e=$(this),t=e.data("FilePicker");if(t){var n=o(e),a=c(e);i.size+=n,i.count+=a,i.picker.push({api:t,size:n,count:a})}})),i.sizeHum=a(i.size),i},this.check=function(e){var t=this.getAllInfo(e);if(t.size>i.maxBytes)throw new v("fileSizeOverload",a(i.maxBytes),e);if(t.count>i.maxFiles)throw new v("fileCountOverload",i.maxFiles,e);$.each(t.picker,(function(e,i){var t=i.api.getConfig();if(i.size>t.maxBytes)throw new v("fileSizeOverload",a(t.maxBytes),i.$filePicker);if(i.count>t.maxFiles)throw new v("fileCountOverload",t.maxFiles,i.$filePicker)}))},this}},{}]},{},[1]);